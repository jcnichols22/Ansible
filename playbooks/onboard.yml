---
# This playbook is used to onboard a new server by installing necessary packages, adding users, and configuring sudo permissions.
- name: Onboarding
  hosts: all
  become: true
  pre_tasks:
    - name: Update package cache (Ubuntu/Debian)
      apt:
        update_cache: true

    - name: Upgrade all packages (Ubuntu/Debian)
      apt:
        upgrade: dist
        autoremove: true
        autoclean: true

  roles:
    - role: base

- name: Workstation setup
  hosts: workstations
  become: true
  roles:
    - role: workstations

- name: Proxmox server setup
  hosts: proxmox_servers
  become: true
  roles:
    - role: proxmox_servers

- name: Media server setup
  hosts: media_servers
  become: true
  roles:
    - role: media_server
