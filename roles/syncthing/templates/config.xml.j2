<?xml version="1.0" encoding="UTF-8"?>
<configuration version="37">
    <folder id="default" label="Default Folder" path="{{ syncthing_home }}/Sync" type="sendreceive" rescanIntervalS="3600" fsWatcherEnabled="true" fsWatcherDelayS="10" ignorePerms="false" autoNormalize="true">
        <minDiskFree unit="%">1</minDiskFree>
        <versioning></versioning>
        <copiers>0</copiers>
        <pullerMaxPendingKiB>0</pullerMaxPendingKiB>
        <hashers>0</hashers>
        <order>random</order>
        <ignoreDelete>false</ignoreDelete>
        <scanProgressIntervalS>0</scanProgressIntervalS>
        <pullerPauseS>0</pullerPauseS>
        <maxConflicts>10</maxConflicts>
        <disableSparseFiles>false</disableSparseFiles>
        <disableTempIndexes>false</disableTempIndexes>
        <paused>false</paused>
        <weakHashThresholdPct>25</weakHashThresholdPct>
        <markerName>.stfolder</markerName>
        <copyOwnershipFromParent>false</copyOwnershipFromParent>
        <modTimeWindowS>0</modTimeWindowS>
        <maxConcurrentWrites>2</maxConcurrentWrites>
        <disableFsync>false</disableFsync>
        <blockPullOrder>standard</blockPullOrder>
        <copyRangeMethod>standard</copyRangeMethod>
        <caseSensitiveFS>true</caseSensitiveFS>
        <junctionsAsDirs>false</junctionsAsDirs>
    </folder>
{%- for folder in syncthing_folders %}
    <folder id="{{ folder.id }}" label="{{ folder.label }}" path="{{ folder.path }}" type="{{ folder.type | default('sendreceive') }}" rescanIntervalS="{{ folder.rescan_interval | default(3600) }}" fsWatcherEnabled="true" fsWatcherDelayS="10" ignorePerms="{{ folder.ignore_perms | default(false) | lower }}" autoNormalize="true">
{%- for device_name in folder.devices %}
{%- set device = syncthing_devices | selectattr('name', 'equalto', device_name) | first | default(none) %}
{%- if device %}
        <device id="{{ device.id }}" introducedBy=""></device>
{%- endif %}
{%- endfor %}
        <minDiskFree unit="%">1</minDiskFree>
        <versioning></versioning>
        <copiers>0</copiers>
        <pullerMaxPendingKiB>0</pullerMaxPendingKiB>
        <hashers>0</hashers>
        <order>random</order>
        <ignoreDelete>{{ folder.ignore_delete | default(false) | lower }}</ignoreDelete>
        <scanProgressIntervalS>0</scanProgressIntervalS>
        <pullerPauseS>0</pullerPauseS>
        <maxConflicts>10</maxConflicts>
        <disableSparseFiles>false</disableSparseFiles>
        <disableTempIndexes>false</disableTempIndexes>
        <paused>false</paused>
        <weakHashThresholdPct>25</weakHashThresholdPct>
        <markerName>.stfolder</markerName>
        <copyOwnershipFromParent>false</copyOwnershipFromParent>
        <modTimeWindowS>0</modTimeWindowS>
        <maxConcurrentWrites>2</maxConcurrentWrites>
        <disableFsync>false</disableFsync>
        <blockPullOrder>standard</blockPullOrder>
        <copyRangeMethod>standard</copyRangeMethod>
        <caseSensitiveFS>true</caseSensitiveFS>
        <junctionsAsDirs>false</junctionsAsDirs>
    </folder>
{%- endfor %}
    <device id="{{ syncthing_device_id }}" name="{{ syncthing_device_name }}" compression="metadata" introducer="false" skipIntroductionRemovals="false" introducedBy="">
        <address>dynamic</address>
        <paused>false</paused>
        <autoAcceptFolders>false</autoAcceptFolders>
        <maxSendKbps>{{ syncthing_max_send_kbps }}</maxSendKbps>
        <maxRecvKbps>{{ syncthing_max_recv_kbps }}</maxRecvKbps>
        <maxRequestKiB>0</maxRequestKiB>
    </device>
{%- for device in syncthing_devices %}
    <device id="{{ device.id }}" name="{{ device.name }}" compression="metadata" introducer="false" skipIntroductionRemovals="false" introducedBy="">
        <address>{{ device.addresses | default('dynamic') }}</address>
        <paused>false</paused>
        <autoAcceptFolders>false</autoAcceptFolders>
        <maxSendKbps>0</maxSendKbps>
        <maxRecvKbps>0</maxRecvKbps>
        <maxRequestKiB>0</maxRequestKiB>
    </device>
{%- endfor %}
    <gui enabled="{{ syncthing_gui_enabled | lower }}" tls="false" debugging="false">
        <address>{{ syncthing_gui_address }}</address>
{%- if syncthing_gui_user %}
        <user>{{ syncthing_gui_user }}</user>
{%- endif %}
{%- if syncthing_gui_password %}
        <password>{{ syncthing_gui_password }}</password>
{%- endif %}
{%- if syncthing_gui_api_key %}
        <apikey>{{ syncthing_gui_api_key }}</apikey>
{%- endif %}
        <theme>default</theme>
    </gui>
    <ldap></ldap>
    <options>
        <listenAddress>{{ syncthing_listen_address }}</listenAddress>
        <globalAnnounceServer>{{ 'default' if syncthing_global_discovery_enabled else '' }}</globalAnnounceServer>
        <globalAnnounceEnabled>{{ syncthing_global_discovery_enabled | lower }}</globalAnnounceEnabled>
        <localAnnounceEnabled>{{ syncthing_local_discovery_enabled | lower }}</localAnnounceEnabled>
        <localAnnouncePort>21027</localAnnouncePort>
        <localAnnounceMCAddr>[ff12::8384]:21027</localAnnounceMCAddr>
        <maxSendKbps>{{ syncthing_max_send_kbps }}</maxSendKbps>
        <maxRecvKbps>{{ syncthing_max_recv_kbps }}</maxRecvKbps>
        <reconnectionIntervalS>60</reconnectionIntervalS>
        <relaysEnabled>{{ syncthing_relays_enabled | lower }}</relaysEnabled>
        <relayReconnectIntervalM>10</relayReconnectIntervalM>
        <startBrowser>false</startBrowser>
        <natEnabled>{{ syncthing_nat_enabled | lower }}</natEnabled>
        <natLeaseMinutes>60</natLeaseMinutes>
        <natRenewalMinutes>30</natRenewalMinutes>
        <natTimeoutSeconds>10</natTimeoutSeconds>
        <urAccepted>{{ '-1' if not syncthing_usage_reporting else '0' }}</urAccepted>
        <urSeen>3</urSeen>
        <urUniqueID></urUniqueID>
        <urURL>https://data.syncthing.net/newdata</urURL>
        <urPostInsecurely>false</urPostInsecurely>
        <urInitialDelayS>1800</urInitialDelayS>
        <restartOnWakeup>{{ syncthing_restart_on_wakeup | lower }}</restartOnWakeup>
        <autoUpgradeIntervalH>12</autoUpgradeIntervalH>
        <upgradeToPreReleases>false</upgradeToPreReleases>
        <keepTemporariesH>24</keepTemporariesH>
        <cacheIgnoredFiles>false</cacheIgnoredFiles>
        <progressUpdateIntervalS>5</progressUpdateIntervalS>
        <limitBandwidthInLan>false</limitBandwidthInLan>
        <minHomeDiskFree unit="%">1</minHomeDiskFree>
        <releasesURL>https://upgrades.syncthing.net/meta.json</releasesURL>
        <overwriteRemoteDeviceNamesOnConnect>false</overwriteRemoteDeviceNamesOnConnect>
        <tempIndexMinBlocks>10</tempIndexMinBlocks>
        <unackedNotificationID>authenticationUserAndPassword</unackedNotificationID>
        <trafficClass>0</trafficClass>
        <setLowPriority>true</setLowPriority>
        <maxFolderConcurrency>0</maxFolderConcurrency>
        <crashReportingEnabled>{{ syncthing_crash_reporting | lower }}</crashReportingEnabled>
        <crashReportingURL>https://crash.syncthing.net/newcrash</crashReportingURL>
        <stunKeepaliveStartS>180</stunKeepaliveStartS>
        <stunKeepaliveMinS>20</stunKeepaliveMinS>
        <stunServer>default</stunServer>
        <databaseTuning>auto</databaseTuning>
        <maxConcurrentIncomingRequestKiB>0</maxConcurrentIncomingRequestKiB>
        <announceLANAddresses>true</announceLANAddresses>
        <sendFullIndexOnUpgrade>false</sendFullIndexOnUpgrade>
    </options>
</configuration>
